{#  -*- coding: utf-8 -*- #}
{% extends 'base.tmpl' %}
{% import 'macro_menu.tmpl' as menu with context %}

{#
    This is the /news/YYYY/ yearly page that lists all posts for a specific year.
#}

{% block menu %}{{ menu.show_menu() }}{% endblock %}
{% block lang %}
    {% if lang == "sv" %}
        <li><a href="/en/news/{{ tag }}/" rel="alternate" hreflang="{{ langname }}">English</a></li>
    {% else %}
        <li><a href="/news/{{ tag }}/" rel="alternate" hreflang="{{ langname }}">Svenska</a></li>
    {% endif %}
{% endblock %}

{% block content %}
<h2>{% if lang == "sv" %}Nyheter för år {% else %}News for year {% endif %}{{ tag }}</h2>

<div class="col-md-8">
{% for post in posts %}
    <div>
        <h2><a href="{{ post.permalink() }}" class="u-url">{{ post.title()|e }}</a></h2>
        <small>{{ post.formatted_date(date_format)|e }}</small>
        {{ post.text(teaser_only=True) }}
    </div>
{% endfor %}
</div>
<div class="col-md-4">
    <h2>{% if lang == "sv" %}År{% else %}Year{% endif %}</h2>
    {% set this_year = 2018 %}
    {% set news_to = 1996 %}
    {% for year in range(this_year - (news_to - 1)) %}
        {% set root_url = "/" if lang == "sv" else "/en/" %}
        <a class="reference" href="{{ root_url }}news/{{ this_year - year }}">{{ this_year - year }}</a><br>
    {% endfor %}
</div>
{% endblock %}

{% block footer %}
    {% if lang == "sv" %}
        - This page is also available in <a href="/en/news/{{ tag }}/" rel="alternate" hreflang="{{ langname }}">English</a>
    {% else %}
        - Den är sidan finns även på <a href="/news/{{ tag }}/" rel="alternate" hreflang="{{ langname }}">svenska</a>
    {% endif %}
{% endblock %}
